<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1"><title>Manim Web Presenter</title></head><body><div class="split left padded-left padded-right"><div id="caching"><button id="cache-button">Cache Videos</button><div id="progress"><div id="progress-bar"></div></div></div><h1>Timeline</h1><table id="timeline"><colgroup><col style="width=30px"><col style="width=30px"><col></colgroup></table></div><div class="split right"><div id="controls"><button id="play-previous-slide"><img/></button> <button id="play-current-slide"><img/></button> <button id="play-next-slide"><img/></button> <button id="enter-fullscreen" class="spaced-button"><img/></button> <input type="number" id="cache-batch-size-input" class="spaced-button number-input"> <button id="cache-batch-size-button">Set Cache Batch Size</button> <input type="number" id="slides-to-auto-load-input" class="number-input"> <button id="slides-to-auto-load-button">Set Slides To Auto Load</button> <input type="number" id="slides-to-keep-input" class="spaced-button number-input"> <button id="slides-to-keep-button">Set Slides To Keep</button> <button id="toggle-fallback" class="spaced-button"></button> <a href="fallback.html">No-Script Fallback</a></div><div id="videos-div"><video id="video0" class="main-video" muted width="720" height="480">Your browser doesn't support HTML5 videos.</video><video id="video1" class="main-video" muted width="720" height="480">Your browser doesn't support HTML5 videos.</video></div></div><script>(()=>{"use strict";var e={424:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(81),n=i.n(s),r=i(645),d=i.n(r)()(n());d.push([e.id,"/* splitting screen */\n.split {\n    height: 100%;\n    position: fixed;\n    z-index: 1;\n    top: 0;\n    overflow-x: hidden;\n    padding-top: 20px;\n}\n\n.left {\n    width: 20%;\n    left: 0;\n}\n\n.right {\n    width: 75%;\n    right: 0;\n}\n\n.padded-left {\n    padding-left: 20px;\n}\n\n.padded-right {\n    padding-right: 20px;\n}\n\n.padded-top {\n    padding-right: 20px;\n}\n\n.padded-bottom {\n    padding-right: 20px;\n}\n\n\n/* caching */\n#caching {\n    padding-right: 40px;\n}\n\n#progress {\n    visibility: hidden;\n    width: 100%;\n    background-color: #ddd;\n    position: relative;\n}\n\n#progress-bar {\n    width: 0%;\n    height: 30px;\n    background-color: #04aa6d;\n}\n\n#cache-button {\n    position: absolute;\n}\n\n\n/* table styling */\n#timeline {\n    margin-bottom: 40px;\n}\n\ntd {\n    text-align: left;\n}\n\n\n/* video styling */\n.spaced-button {\n    margin-left: 20px;\n}\n\n.number-input {\n    width: 50px;\n}\n\n#videos-div {\n    position: relative;\n}\n\n.main-video {\n    top: 0;\n    left: 0;\n    /* todo: doesn't work on chrome */\n    /* border: 20px solid red; */\n}\n\n:fullscreen {\n    cursor: none;\n}\n\n:fullscreen .main-video {\n    width: 100vw;\n    height: 100vh;\n    min-width: 100vw;\n    min-height: 100vh;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n/* second video overlaps first -> size of videos is still respected */\n#video0 {\n    position: relative;\n}\n\n#video1 {\n    position: absolute;\n}\n",""]);const a=d},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,r){"string"==typeof e&&(e=[[null,e,void 0]]);var d={};if(s)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(d[l]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);s&&d[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var r={},d=[],a=0;a<e.length;a++){var l=e[a],o=s.base?l[0]+s.base:l[0],c=r[o]||0,u="".concat(o," ").concat(c);r[o]=c+1;var g=i(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==g)t[g].references++,t[g].updater(h);else{var m=n(h,s);s.byIndex=a,t.splice(a,0,{identifier:u,updater:m,references:1})}d.push(u)}return d}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var r=s(e=e||[],n=n||{});return function(e){e=e||[];for(var d=0;d<r.length;d++){var a=i(r[d]);t[a].references--}for(var l=s(e,n),o=0;o<r.length;o++){var c=i(r[o]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=l}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},185:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTIwIDEybC0xLjQxLTEuNDFMMTMgMTYuMTdWNGgtMnYxMi4xN2wtNS41OC01LjU5TDQgMTJsOCA4IDgtOHoiLz48L3N2Zz4="},729:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4em00LjU5LTEyLjQyTDEwIDE0LjE3bC0yLjU5LTIuNThMNiAxM2w0IDQgOC04eiIvPjwvc3ZnPg=="},817:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTcgMTRINXY1aDV2LTJIN3YtM3ptLTItNGgyVjdoM1Y1SDV2NXptMTIgN2gtM3YyaDV2LTVoLTJ2M3pNMTQgNXYyaDN2M2gyVjVoLTV6Ii8+PC9zdmc+"},773:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDRWMUw4IDVsNCA0VjZjMy4zMSAwIDYgMi42OSA2IDYgMCAxLjAxLS4yNSAxLjk3LS43IDIuOGwxLjQ2IDEuNDZDMTkuNTQgMTUuMDMgMjAgMTMuNTcgMjAgMTJjMC00LjQyLTMuNTgtOC04LTh6bTAgMTRjLTMuMzEgMC02LTIuNjktNi02IDAtMS4wMS4yNS0xLjk3LjctMi44TDUuMjQgNy43NEM0LjQ2IDguOTcgNCAxMC40MyA0IDEyYzAgNC40MiAzLjU4IDggOCA4djNsNC00LTQtNHYzeiIvPjwvc3ZnPg=="},664:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1LjYxIDcuNDFMMTQuMiA2bC02IDYgNiA2IDEuNDEtMS40MUwxMS4wMyAxMmw0LjU4LTQuNTl6Ii8+PC9zdmc+"},246:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwLjAyIDZMOC42MSA3LjQxIDEzLjE5IDEybC00LjU4IDQuNTlMMTAuMDIgMThsNi02LTYtNnoiLz48L3N2Zz4="},263:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgMThjLTQuNDIgMC04LTMuNTgtOC04czMuNTgtOCA4LTggOCAzLjU4IDggOC0zLjU4IDgtOCA4eiIvPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiLz48L3N2Zz4="},706:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgMThjLTQuNDIgMC04LTMuNTgtOC04czMuNTgtOCA4LTggOCAzLjU4IDggOC0zLjU4IDgtOCA4eiIvPjwvc3ZnPg=="},579:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTcuMTEgOC41M0w1LjcgNy4xMUM0LjggOC4yNyA0LjI0IDkuNjEgNC4wNyAxMWgyLjAyYy4xNC0uODcuNDktMS43MiAxLjAyLTIuNDd6TTYuMDkgMTNINC4wN2MuMTcgMS4zOS43MiAyLjczIDEuNjIgMy44OWwxLjQxLTEuNDJjLS41Mi0uNzUtLjg3LTEuNTktMS4wMS0yLjQ3em0xLjAxIDUuMzJjMS4xNi45IDIuNTEgMS40NCAzLjkgMS42MVYxNy45Yy0uODctLjE1LTEuNzEtLjQ5LTIuNDYtMS4wM0w3LjEgMTguMzJ6TTEzIDQuMDdWMUw4LjQ1IDUuNTUgMTMgMTBWNi4wOWMyLjg0LjQ4IDUgMi45NCA1IDUuOTFzLTIuMTYgNS40My01IDUuOTF2Mi4wMmMzLjk1LS40OSA3LTMuODUgNy03Ljkzcy0zLjA1LTcuNDQtNy03LjkzeiIvPjwvc3ZnPg=="},31:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE2IDEzaC0zVjNoLTJ2MTBIOGw0IDQgNC00ek00IDE5djJoMTZ2LTJINHoiLz48L3N2Zz4="}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={id:s,exports:{}};return e[s](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(379),t=i.n(e),s=i(795),n=i.n(s),r=i(569),d=i.n(r),a=i(565),l=i.n(a),o=i(216),c=i.n(o),u=i(589),g=i.n(u),h=i(424),m={};m.styleTagTransform=g(),m.setAttributes=l(),m.insert=d().bind(null,"head"),m.domAPI=n(),m.insertStyleElement=c(),t()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals;var p,M=i(664),I=i(579),_=i(246),y=i(817);class v{constructor(e,t,i=-1){this.progress_el=e,this.bar_el=t,this.max=i}set_max(e){e<=0&&console.error("ProgressBar max can't be smaller/equals 0"),this.max=e}show(){this.progress_el.style.visibility="visible"}hide(){this.progress_el.style.visibility="hidden"}update(e){e<0||e>this.max?console.error(`ProgressBar with max ${this.max} can't update to value ${e}`):(this.bar_el.style.width=e/this.max*100+"%",e==this.max&&setTimeout(this.hide.bind(this),500))}}!function(e){e[e.NORMAL=0]="NORMAL",e[e.LOOP=1]="LOOP",e[e.SKIP=2]="SKIP",e[e.COMPLETE_LOOP=3]="COMPLETE_LOOP"}(p||(p={}));class D{constructor(e){this.type=function(e){switch(e){case"normal":return p.NORMAL;case"loop":return p.LOOP;case"skip":return p.SKIP;case"complete_loop":return p.COMPLETE_LOOP;default:return console.error(`Unsupported slide type '${e}'`),p.NORMAL}}(e.slide_type),this.name=e.name,this.slide_id=e.slide_id,this.video=e.video}cache(e){let t=new XMLHttpRequest;t.onload=()=>{console.log(`Cached slide '${this.name}'`),e()},t.onerror=()=>{console.error(`Slide '${this.name}' failed to be cached`)},t.open("GET",this.video,!0),t.send()}get_type(){return this.type}get_name(){return this.name}get_id(){return this.slide_id}}var T=i(706),b=i(263),w=i(729),L=i(31),N=i(185),f=i(773);class x{constructor(e,t,i,s,n,r,d){this.timeline_slides=[],this.current_video=1,this.slides=[],this.current_slide=-1,this.previous_slide=-1,this.next_slide=0,this.video0=e,this.video1=t,this.videos_div=i,this.timeline=s,this.progress_bar=new v(n,r),this.cache_batch_size=d,function(e,t){let i=new XMLHttpRequest;i.onload=()=>{t(JSON.parse(i.responseText))},i.onerror=()=>{console.error(`Failed to load json '${e}'`)},i.open("GET",e,!0),i.send()}("index.json",(e=>{let t=e.slides;for(let e=0;e<t.length;++e)this.add_slide(t[e]);console.log(`All ${t.length} slides have been parsed successfully.`),this.progress_bar.set_max(t.length),this.load_timeline(),this.play_slide(0)}))}update_video(){if(this.current_slide==this.previous_slide)return this.get_current_video().currentTime=0,void this.get_current_video().play();let e=this.slides[this.current_slide],t=this.get_current_video();this.current_video=0==this.current_video?1:0;let i=this.get_current_video();switch(i.src=e.get_src_url(),i.style.visibility="visible",e.get_type()){case p.SKIP:i.onended=e=>{++this.current_slide,this.next_slide=this.current_slide,this.update_video()};break;case p.LOOP:i.onended=e=>{this.update_video()};break;case p.COMPLETE_LOOP:i.onended=e=>{this.current_slide=this.next_slide,this.update_video()};break;default:i.onended=e=>{}}console.log(`Playing slide '${e.get_name()}'`),i.play().then((()=>{t.pause(),t.style.visibility="hidden"})),this.update_timeline(),this.update_source(),this.previous_slide=this.current_slide}play_slide(e,t=!1){e<0||e>=this.slides.length?console.error(`Trying to switch to invalid slide index #${e}`):(console.log(`Switching to slide '${this.slides[e].get_name()} '`),-1==this.current_slide||this.slides[this.current_slide].get_type()!=p.COMPLETE_LOOP||t?(this.next_slide=e,this.current_slide=e,this.update_video()):this.next_slide=e)}play_next_slide(){this.play_slide(this.current_slide+1)}restart_current_slide(){this.play_slide(this.current_slide,!0)}play_previous_slide(){this.play_slide(this.current_slide-1,!0)}load_timeline(){for(let e of this.slides){let t=document.createElement("tr");this.timeline.appendChild(t),t.onclick=()=>{this.play_slide(e.get_id(),!0)};let i=document.createElement("td");t.appendChild(i);let s=document.createElement("img");i.appendChild(s),s.src=T,s.width=30,s.height=30,this.timeline_slides.push(s);let n=document.createElement("td");t.appendChild(n);let r=document.createElement("img");switch(n.appendChild(r),e.get_type()){case p.NORMAL:r.src=L;break;case p.SKIP:r.src=N;break;case p.LOOP:r.src=I;break;case p.COMPLETE_LOOP:r.src=f}s.width=30,s.height=30;let d=document.createElement("td");t.appendChild(d);let a=document.createElement("button");n.appendChild(a),a.innerText=e.get_name()}}update_timeline(){-1!=this.previous_slide&&(this.timeline_slides[this.previous_slide].src=w),this.timeline_slides[this.current_slide].src=b}get_current_slide(){return this.current_slide}get_current_video(){return 0==this.current_video?this.video0:this.video1}cache_batch(e){this.progress_bar.show();let t=e;for(let i=e,s=Math.min(e+this.cache_batch_size,this.slides.length);i<s;++i)this.slides[i].cache((()=>{this.progress_bar.update(t),++t,t==this.slides.length?(console.log(`Batch caching complete with offset ${e}`),console.log("Caching complete"),this.progress_bar.hide()):t==e+this.cache_batch_size&&(console.log(`Batch caching complete with offset ${e}`),this.cache_batch(t))}))}cache(){this.cache_batch(0)}enter_fullscreen(){this.videos_div.requestFullscreen&&this.videos_div.requestFullscreen()}exit_fullscreen(){document.exitFullscreen&&document.exitFullscreen()}fullscreen_status(){return null!=document.fullscreenElement}toggle_fullscreen(){this.fullscreen_status()?this.exit_fullscreen():this.enter_fullscreen()}update_source(){}}class A extends D{constructor(e){super(e),this.media_source=new MediaSource,this.media_buffer=null,this.media_source.onsourceopen=e=>{let t='video/mp4; codecs="avc1.64002A"';if(!("MediaSource"in window)||!MediaSource.isTypeSupported(t))return console.error("MediaSource or mime codec not supported"),void this.media_source.endOfStream();let i=this.media_source.addSourceBuffer(t);i.onupdateend=e=>{this.media_source.endOfStream()},i.onerror=e=>{console.error("Failed to append buffer to source buffer:"),console.error(this.media_source)},i.onabort=e=>{console.error("Aborted source buffer:"),console.error(this.media_source)},this.load((()=>{null!=this.media_buffer?i.appendBuffer(this.media_buffer):i.abort()}),(()=>{i.abort()}))}}load(e=null,t=null){if(null!==this.media_buffer)return void(null!==e&&e());let i=new XMLHttpRequest;i.responseType="arraybuffer",i.onload=()=>{this.media_buffer=i.response,console.log(`Slide '${this.name}' successfully loaded`),null!==e&&e()},i.onerror=()=>{console.error(`Slide '${this.name}' failed to load`),null!==t&&t()},i.open("GET",this.video,!0),i.send()}unload(){this.media_buffer=null}get_src_url(){return URL.createObjectURL(this.media_source)}}class C extends x{constructor(e,t,i,s,n,r,d,a,l){super(e,t,i,s,n,r,d),this.slides_to_auto_load=a,this.slides_to_keep=l}update_source(){for(let e=this.current_slide+1,t=Math.min(this.current_slide+this.slides_to_auto_load+1,this.slides.length);e<t;++e)this.slides[e].load();for(let e=0,t=this.current_slide-this.slides_to_keep;e<t;++e)this.slides[e].unload()}add_slide(e){this.slides.push(new A(e))}}class j extends D{get_src_url(){return this.video}}class E extends x{add_slide(e){this.slides.push(new j(e))}}class B{static load(){this.m_url_search_params.has("cache_batch_size")&&(z=Number(this.m_url_search_params.get("cache_batch_size"))),this.m_url_search_params.has("slides_to_auto_load")&&(P=Number(this.m_url_search_params.get("slides_to_auto_load"))),this.m_url_search_params.has("slides_to_keep")&&(S=Number(this.m_url_search_params.get("slides_to_keep"))),this.m_url_search_params.has("use_fallback")&&(H="true"===this.m_url_search_params.get("use_fallback"))}static reload_url_params(){window.history.replaceState({},"",`${location.pathname}?${this.m_url_search_params.toString()}`),location.reload()}static set(e,t){this.m_url_search_params.set(e,t.toString()),this.reload_url_params()}}B.m_url_search_params=new URLSearchParams(location.search);var O,z=5,P=5,S=2,H=!1;document.body.onload=()=>{B.load(),function(){let e=document.getElementById("progress"),t=document.getElementById("progress-bar"),i=document.getElementById("timeline"),s=document.getElementById("video0"),n=document.getElementById("video1"),r=document.getElementById("videos-div");H?(console.log(`Using FallbackPresentation with a cache batch size of ${z}`),O=new E(s,n,r,i,e,t,z)):(console.log(`Using BufferPresentation with ${P} slides to auto load, ${S} slides to keep and a cache batch size of ${z}`),O=new C(s,n,r,i,e,t,z,P,S))}(),function(){let e=document.getElementById("play-previous-slide"),t=document.getElementById("play-current-slide"),i=document.getElementById("play-next-slide"),s=document.getElementById("enter-fullscreen");e.getElementsByTagName("img")[0].src=M,t.getElementsByTagName("img")[0].src=I,i.getElementsByTagName("img")[0].src=_,s.getElementsByTagName("img")[0].src=y,e.addEventListener("click",O.play_previous_slide.bind(O)),t.addEventListener("click",O.restart_current_slide.bind(O)),i.addEventListener("click",O.play_next_slide.bind(O)),s.addEventListener("click",O.enter_fullscreen.bind(O))}(),function(){const e=["ArrowLeft","ArrowDown","PageDown","Backspace"],t=["ArrowRight","ArrowUp","PageUp","Enter","Space"],i=["KeyF"];document.addEventListener("keydown",(s=>{s.repeat||(e.includes(s.code)?O.play_previous_slide():t.includes(s.code)?O.play_next_slide():i.includes(s.code)&&O.toggle_fullscreen())}))}(),function(){let e=document.getElementById("cache-button"),t=document.getElementById("toggle-fallback"),i=document.getElementById("cache-batch-size-button"),s=document.getElementById("slides-to-auto-load-button"),n=document.getElementById("slides-to-keep-button"),r=document.getElementById("cache-batch-size-input"),d=document.getElementById("slides-to-auto-load-input"),a=document.getElementById("slides-to-keep-input");t.innerText=H?"Disable Fallback Loading":"Use Fallback Loading",r.value=z.toString(),d.value=P.toString(),a.value=S.toString(),H&&(d.style.visibility="hidden",s.style.visibility="hidden",a.style.visibility="hidden",n.style.visibility="hidden"),e.addEventListener("click",(()=>{e.style.visibility="hidden",O.cache()})),t.addEventListener("click",(()=>{B.set("use_fallback",(!H).toString())})),i.addEventListener("click",(()=>{let e=Number(r.value);B.set("cache_batch_size",e)})),s.addEventListener("click",(()=>{let e=Number(d.value);B.set("slides_to_auto_load",e)})),n.addEventListener("click",(()=>{let e=Number(a.value);B.set("slides_to_keep",e)}))}()}})()})();</script></body></html>