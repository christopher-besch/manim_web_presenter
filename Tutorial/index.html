<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1"><title>Manim Web Presenter</title></head><body><div class="content"><div class="side-bar"><div class="timeline">[timeline here]</div><div class="time-spent">[time spent here]</div></div><div class="main"><div class="controls"><button id="play-previous-slide"><img/></button> <button id="play-next-slide"><img/></button> <button id="enter-fullscreen"><img/></button></div><div id="videos-div"><video id="video0" class="main-video" muted width="720" height="480">Your browser doesn't support HTML5 videos.</video><video id="video1" class="main-video" muted width="720" height="480">Your browser doesn't support HTML5 videos.</video></div></div></div><script>(()=>{"use strict";var e={424:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(81),n=i.n(s),r=i(645),o=i.n(r)()(n());o.push([e.id,"#videos-div {\n    position: relative;\n}\n\n.main-video {\n    top: 0;\n    left: 0;\n    /* todo: doesn't work on chrome */\n    /* border: 20px solid red; */\n}\n\n:fullscreen {\n    cursor: none;\n}\n\n:fullscreen .main-video {\n    width: 100vw;\n    height: 100vh;\n    min-width: 100vw;\n    min-height: 100vh;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n/* second video overlaps first -> size of videos is still respected */\n#video0 {\n    position: relative;\n}\n\n#video1 {\n    position: absolute;\n}\n",""]);const d=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var d=0;d<this.length;d++){var l=this[d][0];null!=l&&(o[l]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);s&&o[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var r={},o=[],d=0;d<e.length;d++){var l=e[d],a=s.base?l[0]+s.base:l[0],c=r[a]||0,u="".concat(a," ").concat(c);r[a]=c+1;var h=i(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var v=n(p,s);s.byIndex=d,t.splice(d,0,{identifier:u,updater:v,references:1})}o.push(u)}return o}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var r=s(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var d=i(r[o]);t[d].references--}for(var l=s(e,n),a=0;a<r.length;a++){var c=i(r[a]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=l}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},817:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTcgMTRINXY1aDV2LTJIN3YtM3ptLTItNGgyVjdoM1Y1SDV2NXptMTIgN2gtM3YyaDV2LTVoLTJ2M3pNMTQgNXYyaDN2M2gyVjVoLTV6Ii8+PC9zdmc+"},664:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1LjYxIDcuNDFMMTQuMiA2bC02IDYgNiA2IDEuNDEtMS40MUwxMS4wMyAxMmw0LjU4LTQuNTl6Ii8+PC9zdmc+"},246:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwLjAyIDZMOC42MSA3LjQxIDEzLjE5IDEybC00LjU4IDQuNTlMMTAuMDIgMThsNi02LTYtNnoiLz48L3N2Zz4="}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={id:s,exports:{}};return e[s](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(379),t=i.n(e),s=i(795),n=i.n(s),r=i(569),o=i.n(r),d=i(565),l=i.n(d),a=i(216),c=i.n(a),u=i(589),h=i.n(u),p=i(424),v={};v.styleTagTransform=h(),v.setAttributes=l(),v.insert=o().bind(null,"head"),v.domAPI=n(),v.insertStyleElement=c(),t()(p.Z,v),p.Z&&p.Z.locals&&p.Z.locals;var f,m=i(664),_=i(246),g=i(817);!function(e){e[e.NORMAL=0]="NORMAL",e[e.LOOP=1]="LOOP",e[e.SKIP=2]="SKIP",e[e.COMPLETE_LOOP=3]="COMPLETE_LOOP"}(f||(f={}));class y extends class{constructor(e){this.type=function(e){switch(e){default:return f.NORMAL;case"loop":return f.LOOP;case"skip":return f.SKIP;case"complete_loop":return f.COMPLETE_LOOP}}(e.slide_type),this.name=e.name,this.slide_id=e.slide_id,this.video=e.video}}{constructor(e){super(e),this.media_source=new MediaSource,this.media_buffer=null,this.media_source.onsourceopen=e=>{let t='video/mp4; codecs="avc1.64002A"';if(!("MediaSource"in window)||!MediaSource.isTypeSupported(t))return console.error("MediaSource or mime codec not supported"),void this.media_source.endOfStream();let i=this.media_source.addSourceBuffer(t);i.onupdateend=e=>{this.media_source.endOfStream()},i.onerror=e=>{console.error("Failed to append buffer to source buffer:"),console.error(this.media_source)},i.onabort=e=>{console.error("Aborted source buffer:"),console.error(this.media_source)},this.load((()=>{null!=this.media_buffer?i.appendBuffer(this.media_buffer):i.abort()}),(()=>{i.abort()}))}}load(e=null,t=null){if(null!==this.media_buffer)return void(null!==e&&e());let i=new XMLHttpRequest;i.responseType="arraybuffer",i.onload=()=>{this.media_buffer=i.response,console.log(`Slide '${this.name}' successfully loaded`),null!==e&&e()},i.onerror=()=>{console.error(`Slide '${this.name}' failed to load`),null!==t&&t()},i.open("GET",this.video,!0),i.send()}unload(){this.media_buffer=null}get_src_url(){return URL.createObjectURL(this.media_source)}}class M extends class{constructor(e,t,i){this.current_video=1,this.slides=[],this.current_slide=-1,this.previous_slide=-1,this.next_slide=0,this.video0=e,this.video1=t,this.videos_div=i,function(e,t){let i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4==i.readyState)try{t(JSON.parse(i.responseText),200==i.status)}catch(e){t(e,!1)}},i.open("GET","index.json",!0),i.send()}(0,((e,t)=>{if(!t)return console.error(e),void console.error("Slides could not be loaded");let i=e.slides;for(let e=0;e<i.length;++e)this.add_slide(i[e]);console.log(`All ${i.length} slides have been parsed successfully.`),this.play_slide(0)}))}update_video(){let e=this.slides[this.current_slide];if(this.current_slide!=this.previous_slide){this.previous_slide=this.current_slide;let t=this.get_current_video();this.current_video=0==this.current_video?1:0;let i=this.get_current_video();switch(i.src=e.get_src_url(),i.style.visibility="visible",e.type){case f.SKIP:i.onended=e=>{++this.current_slide,this.next_slide=this.current_slide,this.update_video()};break;case f.LOOP:i.onended=e=>{this.update_video()};break;case f.COMPLETE_LOOP:i.onended=e=>{this.current_slide=this.next_slide,this.update_video()};break;default:i.onended=e=>{}}console.log(`Playing slide '${e.name}'`),i.play().then((()=>{t.pause(),t.style.visibility="hidden"}))}else this.get_current_video().currentTime=0,this.get_current_video().play();this.update_source()}play_next_slide(){this.play_slide(this.current_slide+1)}play_previous_slide(){this.play_slide(this.current_slide-1,!0)}play_slide(e,t=!1){e<0||e>=this.slides.length?console.error(`Trying to switch to invalid slide number #${e}`):(console.log(`Switching to slide '${this.slides[e].name} '`),-1==this.current_slide||this.slides[this.current_slide].type!=f.COMPLETE_LOOP||t?(this.next_slide=e,this.current_slide=e,this.update_video()):this.next_slide=e)}get_current_slide(){return this.current_slide}get_current_video(){return 0==this.current_video?this.video0:this.video1}enter_fullscreen(){this.videos_div.requestFullscreen&&this.videos_div.requestFullscreen()}exit_fullscreen(){document.exitFullscreen&&document.exitFullscreen()}fullscreen_status(){return null!=document.fullscreenElement}toggle_fullscreen(){this.fullscreen_status()?this.exit_fullscreen():this.enter_fullscreen()}update_source(){}}{constructor(e,t,i,s,n){super(e,t,i),this.slides_to_auto_load=s,this.slides_to_keep=n}update_source(){for(let e=this.current_slide+1,t=Math.min(this.current_slide+this.slides_to_auto_load+1,this.slides.length);e<t;++e)this.slides[e].load();for(let e=0,t=this.current_slide-this.slides_to_keep;e<t;++e)this.slides[e].unload()}add_slide(e){this.slides.push(new y(e))}}let I=["ArrowLeft","ArrowDown","PageDown","Backspace"],b=["ArrowRight","ArrowUp","PageUp","Enter","Space"],w=["KeyF"];document.body.onload=()=>{let e=document.getElementById("play-previous-slide"),t=document.getElementById("play-next-slide"),i=document.getElementById("enter-fullscreen");e.getElementsByTagName("img")[0].src=m,t.getElementsByTagName("img")[0].src=_,i.getElementsByTagName("img")[0].src=g;let s=document.getElementById("video0"),n=document.getElementById("video1"),r=document.getElementById("videos-div");if(null==s||null==n)throw"Cant't find video elements.";let o=new M(s,n,r,5,2);document.addEventListener("keydown",(e=>{e.repeat||(I.includes(e.code)?o.play_previous_slide():b.includes(e.code)?o.play_next_slide():w.includes(e.code)&&o.toggle_fullscreen())})),e.addEventListener("click",o.play_previous_slide.bind(o)),t.addEventListener("click",o.play_next_slide.bind(o)),i.addEventListener("click",o.enter_fullscreen.bind(o))}})()})();</script></body></html>